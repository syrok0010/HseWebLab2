import{u as C,r as c,j as e,f as N,a as b,b as w}from"./index-D40aCU1E.js";const L=t=>{let a=0;for(let n=0;n<t.length;n++)a=t.charCodeAt(n)+((a<<5)-a),a=a&a;return`hsl(${Math.abs(a%360)}, 70%, 55%)`},S=({baseCode:t,targetCode:a,rate:d})=>{const o=L(a),r=a.substring(0,a.length>=2?2:1).toUpperCase(),n=`/${t.toLowerCase()}/${a.toLowerCase()}`,u=C(),[,m]=c.useTransition(),x=h=>{h.preventDefault(),m(()=>{u(n)})};return e.jsx("a",{href:n,onClick:x,className:"currency-card-link","aria-label":`View ${t} to ${a} exchange rate`,children:e.jsxs("div",{className:"currency-card",children:[e.jsx("div",{className:"currency-icon-placeholder",style:{backgroundColor:o},"aria-hidden":"true",children:r}),e.jsx("span",{className:"currency-code",children:a.toUpperCase()}),e.jsx("span",{className:"currency-rate",children:N(d)}),e.jsxs("span",{className:"currency-base",children:["per 1 ",t.toUpperCase()]})]})})},R=()=>{const t=b(),{rates:a,date:d,baseCurrency:o}=t,[r,n]=c.useState(""),[u,m]=c.useState("code_asc"),[x,h]=c.useState([]),[g,v]=c.useState(!0),p=c.useMemo(()=>{if(!a)return[];let s=Object.entries(a);return r&&(s=s.filter(([i,[l]])=>i.toLowerCase().includes(r.toLowerCase())||l.toLowerCase().includes(r.toLowerCase()))),s.sort(([i,[,l]],[j,[,y]])=>{switch(u){case"code_desc":return j.localeCompare(i);case"rate_asc":return l-y;case"rate_desc":return y-l;case"code_asc":default:return i.localeCompare(j)}}),s},[a,r,u]);c.useEffect(()=>{if(g){h(p),v(!1);return}document.startViewTransition(()=>{w.flushSync(()=>{h(p)})})},[p,g]);const f=a?p.length===0?r?`No currencies match your search for "${r}".`:`No exchange rates are currently available for ${o.toUpperCase()}.`:null:"Failed to load exchange rates or no data available.";return e.jsxs("div",{className:"container courses-gallery-container",children:[e.jsxs("h1",{children:[o.toUpperCase()," Exchange Rates Today"]}),d&&e.jsxs("p",{className:"update-date",children:["Data as of: ",d]}),e.jsxs("div",{className:"controls-container",children:[e.jsx("input",{type:"text",placeholder:"Search by currency code or name...",value:r,onChange:s=>n(s.target.value),className:"search-input","aria-label":"Search exchange rates by currency code or name"}),e.jsxs("select",{id:"sort-select",value:u,onChange:s=>m(s.target.value),className:"sort-select","aria-label":"Sort exchange rates",children:[e.jsx("option",{value:"code_asc",children:"Code (A-Z)"}),e.jsx("option",{value:"code_desc",children:"Code (Z-A)"}),e.jsx("option",{value:"rate_asc",children:"Rate (Low to High)"}),e.jsx("option",{value:"rate_desc",children:"Rate (High to Low)"})]})]}),f&&e.jsx("div",{className:"info-message",children:f}),e.jsx("div",{className:"courses-grid",children:x.map(([s,[i,l]])=>e.jsx("div",{className:"grid-item-vt-container",style:{viewTransitionName:`currency-${s}`},title:i,children:e.jsx(S,{baseCode:o,targetCode:s,rate:l})},s))})]})};export{R as default};
