<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
        const path = sessionStorage.getItem('redirectPath');
        sessionStorage.removeItem('redirectPath');

        if (!path) {
            sessionStorage.setItem('redirectPath', window.location.pathname + window.location.search + window.location.hash);
            const repositoryName = 'HseWebLab2';
            const basePath = '/' + repositoryName + '/';
            window.location.replace(basePath);
        } else {
            const basePath = '/' + 'HseWebLab2' + '/';
            const targetPath = path.startsWith(basePath) ? path : basePath + path.substring(1);
            if (targetPath !== window.location.pathname + window.location.search + window.location.hash) {
                history.replaceState(null, '', targetPath);
            } else {
                window.location.replace(basePath);
            }
        }
    </script>
</head>
<body>
<p>If you are not redirected automatically, <a id="manual-redirect" href="/">click here</a>.</p>
<script>
    const repositoryName = 'HseWebLab2';
    const basePath = '/' + repositoryName + '/';
    document.getElementById('manual-redirect').href = basePath;
</script>
</body>
</html>